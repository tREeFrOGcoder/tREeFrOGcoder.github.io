<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Page Draft</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

</head>
<body>
    <div class="container">


        <!-- Super large cover image section -->
        <section class="cover-image">
            <img src="src/cover.png" alt="Cover Image" class="cover-img">
            <!-- <img src="src/1.1/noisy_im_250.png" alt="Cover Image" class="cover-img"> -->
            <div class="title-block">
                <h1>Diffusion Power:</h1>
                <h2>Pure high-dimensional interpolation magic</h2>
            </div>
        </section>

        


        <!-- Sidebar with navigation -->
        <aside class="sidebar">
            <nav>
                <ul>
                    <li><a href="#sectiona">Part A: Playground</a></li>
                    <ul>
                        <li><a href="#section0">Part 0: Set up</a></li>
                        <li><a href="#section1">Part 1: Sampling</a></li>
                        <ul>
                            <li><a href="#section1.1">1.1 Forward</a></li>
                            <li><a href="#section1.2">1.2 Classic</a></li>
                            <li><a href="#section1.3">1.3 One-Step</a></li>
                            <li><a href="#section1.4">1.4 Interactive</a></li>
                            <li><a href="#section1.5">1.5 Diffusion</a></li>
                            <li><a href="#section1.6">1.6 CFG</a></li>
                            <li><a href="#section1.7">1.7 Translation</a></li>
                            <ul>
                                <li><a href="#section1.7.1">1.7.1 SDEdit</a></li>
                                <li><a href="#section1.7.2">1.7.2 Inpaint</a></li>
                                <li><a href="#section1.7.3">1.7.3 Text</a></li>
                            </ul>
                            <li><a href="#section1.8">1.8 Anagram</a></li>
                            <li><a href="#section1.9">1.9 Hybrid</a></li>
                            <li><a href="#section1.9*">1.9* B&W</a></li>
                        </ul>
                    </ul>
            
                    <li><a href="#sectionb">Part B: Forge</a></li>
                    <ul>
                        <li><a href="#sectionb1">Part 1: UNet</a></li>
                        <ul>
                            <li><a href="#sectionb1.1">1.1 UNet</a></li>
                            <li><a href="#sectionb1.2">1.2 Denoiser</a></li>
                            <ul>
                                <li><a href="#sectionb1.2.1">1.2.1 Train</a></li>
                                <li><a href="#sectionb1.2.2">1.2.2 Test</a></li>
                            </ul>
                        </ul>
                        <li><a href="#sectionb2">Part 2: Diffusion</a></li>
                        <ul>
                            <li><a href="#sectionb2.1">2.1 TCUNet</a></li>
                            <li><a href="#sectionb2.2">2.2 Train</a></li>
                            <li><a href="#sectionb2.3">2.3 Sampling</a></li>
                            <li><a href="#sectionb2.4">2.4 CCUNet</a></li>
                            <li><a href="#sectionb2.5">2.5 Sampling</a></li>
                        </ul>
                    </ul>
                </ul>
            </nav>
            
        </aside>

        
        <!-- Main content section -->
        <main class="content">
            
            <!-- Sectiona -->
            <section id="sectiona" class="section">
                <h1>Part A: Diffusion Playground</h1>
                <ul>
                    <li>Here we explore the power of diffusion models mainly by implementing multiple ways of sampling, which is basically inference.</li>
                    <li>The Diffusion Model we use is DeepFloyd IF with text embeddings from TF.</li>
                    <li>Let's get started!</li>
                </ul>
                <p> </p>
                <!-- Section0 -->
                <section id="section0" class="subsection">
                    <h2>Part 0: Setup and initials</h2>
                    <ul>
                        <li>
                          <p><b>Steps:</b></p>
                          <ul>
                            <li>Created a Hugging Face account and logged in.</li>
                            <li>Accepted the license for the DeepFloyd model and generated a Hugging Face Hub token.</li>
                            <li>Downloaded precomputed text embeddings to avoid GPU memory issues.</li>
                            <li>Instantiated the <code>stage_1</code> and <code>stage_2</code> objects for text-to-image generation.</li>
                            <li>Used provided prompts and experimented with different <code>num_inference_steps</code> values.</li>
                          </ul>
                        </li>
                    </ul>

                    <ul>
                        <li>Below are results of taking different <code>num_inference_steps</code> values for the same prompt. </li>
                        <li><code>num_inference_steps</code> on stage 1 won't affect the quality, but affects where the set of generated images will be on the image manifold.</li>
                        <li>On the other hand, <code>num_inference_steps</code> on stage 2 DO affect the quality of the generated images.</li>
                        <li>It's also obvious that the larger the <code>num_inference_steps</code> on stage 2, the more the details. Compare image 1 and 2, image 3 and 4 to get a feeling for this.</li>
                    </ul>
                    

                    <section id="image-array-single">
                        <div class="image-card-single">
                            <img src="df/0/20-20.png" alt="Image 1">
                            <div class="image-single-info">
                                <p><strong>Stage 1: 20, Stage 2: 20</strong></p>
                            </div>
                        </div>
                    </section>

                    <section id="image-array-single">
                        <div class="image-card-single">
                            <img src="df/0/20-100.png" alt="Image 2">
                            <div class="image-single-info">
                                <p><strong>Stage 1: 20, Stage 2: 100</strong></p>
                            </div>
                        </div>
                    </section>

                    <section id="image-array-single">
                        <div class="image-card-single">
                            <img src="df/0/100-20.png" alt="Image 3">
                            <div class="image-single-info">
                                <p><strong>Stage 1: 100, Stage 2: 20</strong></p>
                            </div>
                        </div>
                    </section>

                    <section id="image-array-single">
                        <div class="image-card-single">
                            <img src="df/0/100-100.png" alt="Image 4">
                            <div class="image-single-info">
                                <p><strong>Stage 1: 100, Stage 2: 100</strong></p>
                            </div>
                        </div>
                    </section>

                </section>
                
                <!-- Section1 -->
                <section id="section1" class="subsection">
                    <h2>Part 1: Sampling Loops for inference</h2>
                    <ul>
                        <li>The key part of this section is to generate images given a Diffusion model,</li>
                        <li>Since the model is trained to denoise following a noise shedule</li>
                        <li>It's hallucination nature would result in inperfect reconstruction of the image from pure noise, which is useful for us to generating new images that also lie on the image manifold.</li>
                        <li>The key to make the generation work is to construct good sampling procedures that guide the model to denoise on the right image at the right timestep for the desired result.</li>
                    </ul>

                    <section id="section1.1" class="subsubsection">
                        <h3>1.1: Implementing the Forward Process</h3>
                        <ul>
                            <li>
                              <p><b>Steps:</b></p>
                              <ul>
                                <li>The forward process in diffusion models: noise is added to a clean image to produce progressively noisier versions.</li>
                                <li>The formula for adding more noise: \( q(x_t \mid x_0) = \mathcal{N}(x_t; \sqrt{\bar{\alpha}_t} x_0, (1 - \bar{\alpha}_t) \mathbf{I}) \).</li>
                                <li>We compute it using: \( x_t = \sqrt{\bar{\alpha}_t} x_0 + \sqrt{1 - \bar{\alpha}_t} \epsilon, \, \epsilon \sim \mathcal{N}(0, 1) \)</li>
                                <li>Downloaded the Berkeley Campanile image and resized it to 64x64 pixels as the test input.</li>
                                <li>Used the <code>alphas_cumprod</code> variable to compute <code>ᾱ_t</code> values at timesteps <code>t = 250, 500, 750</code>.</li>
                                <li>Implemented the <code>forward(im, t)</code> function to simulate the addition of noise at the specified timesteps.</li>
                              </ul>
                            </li>
                        </ul>

                        <section id="image-array-4">
                            <div class="image-card-4">
                                <img src="df/" alt="Image 1">
                                <div class="image-4-info">
                                    <p><strong>gaussian_blur_final</strong></p>
                                </div>
                            </div>

                            





                        </section>






                    </section>

                    <section id="section1.2" class="subsubsection">
                        <h3>1.2: Classic Denoising</h3>
                    </section>

                    <section id="section1.3" class="subsubsection">
                        <h3>1.3: One-Step Denoising</h3>
                    </section>

                    <section id="section1.4" class="subsubsection">
                        <h3>1.4: Interative Denoising</h3>
                    </section>

                    <section id="section1.5" class="subsubsection">
                        <h3>1.5: Diffusion Model Sampling</h3>
                    </section>

                    <section id="section1.6" class="subsubsection">
                        <h3>1.6: Classifier-Free Guidance (CFG)</h3>
                    </section>

                    <section id="section1.7" class="subsubsection">
                        <h3>1.7: Image-to-Image Translation</h3>

                        <section id="section1.7.1" class="subsubsubsection">
                            <h4>1.7.1: SDEdit -- Editing Hand-Drawn and Web Images</h4>
                        </section>

                        <section id="section1.7.2" class="subsubsubsection">
                            <h4>1.7.2: Inpainting</h4>
                        </section>

                        <section id="section1.7.3" class="subsubsubsection">
                            <h4>1.7.3: Text-Conditional Image-to-Image Translation</h4>


                            <section id="image-array-4">
                                <div class="image-card-4">
                                    <img src="df/1.4/gaussian_blur_final.png" alt="Image 1">
                                    <div class="image-4-info">
                                        <p><strong>gaussian_blur_final</strong></p>
                                    </div>
                                </div>

                                <div class="image-card-4">
                                    <img src="df/1.4/gaussian_blur_final.png" alt="Image 1">
                                    <div class="image-4-info">
                                        <p><strong>gaussian_blur_final</strong></p>
                                    </div>
                                </div>

                                <div class="image-card-4">
                                    <img src="df/1.4/gaussian_blur_final.png" alt="Image 1">
                                    <div class="image-4-info">
                                        <p><strong>gaussian_blur_final</strong></p>
                                    </div>
                                </div>


                                <div class="image-card-4">
                                    <img src="df/1.4/gaussian_blur_final.png" alt="Image 1">
                                    <div class="image-4-info">
                                        <p><strong>gaussian_blur_final</strong></p>
                                    </div>
                                </div>
                            </section>

                        </section>

                    </section>

                    <section id="section1.8" class="subsubsection">
                        <h3>1.8: Visual Anagrams</h3>
                    </section>

                    <section id="section1.9" class="subsubsection">
                        <h3>1.9: Hybrid Images</h3>
                    </section>

                    <section id="section1.9*" class="subsubsection">
                        <h3>1.9*: Bells & Whistles</h3>
                    </section>

                </section>




                

            </section>

            <section id="sectionb" class="section">
                <h1>Part B: Diffusion Forge</h1>

                <section id="sectionb1" class="subsubsection">
                    <h2>Part 1: Training a Single-Step Denoising UNet</h2>

                    <section id="sectionb1.1" class="subsubsubsection">
                        <h3>1.1: Implementing the UNet</h3>
                    </section>

                    <section id="sectionb1.2" class="subsubsubsection">
                        <h3>1.2: Using the UNet to Train a Denoiser</h3>

                        <section id="sectionb1.2.1" class="subsubsubsection">
                            <h4>1.2.1: Using the UNet to Train a Denoiser</h4>
                        </section>

                        <section id="sectionb1.2.2" class="subsubsubsection">
                            <h4>1.2.2: Out-of-Distribution Testing</h4>
                        </section>
                    </section>
                </section>

                <section id="sectionb2" class="subsubsection">
                    <h2>Part 2: Training a Diffusion Model</h2>
                    
                    <section id="sectionb2.1" class="subsubsubsection">
                        <h3>2.1: Time Conditional UNet (TCUNet)</h3>
                    </section>

                    <section id="sectionb2.2" class="subsubsubsection">
                        <h3>2.2: Training TCUnet</h3>
                    </section>

                    <section id="sectionb2.3" class="subsubsubsection">
                        <h3>2.3: Sampling from TCUNet</h3>
                    </section>

                    <section id="sectionb2.4" class="subsubsubsection">
                        <h3>2.4: Class Conditional UNet (CCUNet) + Training CCUNet</h3>
                    </section>

                    <section id="sectionb2.5" class="subsubsubsection">
                        <h3>2.5: Sampling from TCUNet</h3>
                    </section>

                </section>
                
            </section>
            
        </main>
    </div>
</body>
</html>
